2023-05-09 09:06:00.1242|INFO|Nite.API.Program|Initializing application...
2023-05-09 09:06:09.4070|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (77ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-05-09 09:06:09.5269|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (55ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-05-09 09:06:09.5269|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-05-09 09:06:09.5445|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-05-09 09:06:09.6227|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-05-09 09:06:09.6721|INFO|Microsoft.EntityFrameworkCore.Migrations|No migrations were applied. The database is already up to date.
2023-05-09 09:06:10.2712|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\Andreea\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-05-09 09:06:14.5795|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7053/ - -
2023-05-09 09:06:14.8967|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7053/ - - - 404 0 - 324.2606ms
2023-05-09 09:08:38.6732|INFO|Nite.API.Program|Initializing application...
2023-05-09 09:08:51.9100|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (76ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-05-09 09:08:55.2112|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3,049ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [NiteDb] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-05-09 09:08:55.6109|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (394ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [NiteDb];
2023-05-09 09:08:57.0815|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1,216ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [NiteDb];
2023-05-09 09:08:57.8494|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (733ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [NiteDb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-05-09 09:08:57.8852|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-05-09 09:08:58.2010|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-05-09 09:08:58.2010|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-05-09 09:08:58.2777|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (53ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-05-09 09:08:58.3013|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-05-09 09:08:58.3586|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230328164011_Initial Migration'.
2023-05-09 09:08:58.4842|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TVShows] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Year] int NOT NULL,
    [Audience] nvarchar(max) NOT NULL,
    [Seasons] int NOT NULL,
    [Genre] nvarchar(max) NOT NULL,
    [Status] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_TVShows] PRIMARY KEY ([Id])
);
2023-05-09 09:08:58.4942|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Username] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Password] nvarchar(max) NOT NULL,
    [IsAdmin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-05-09 09:08:58.5832|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (86ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Audience', N'Description', N'Genre', N'Name', N'Seasons', N'Status', N'Year') AND [object_id] = OBJECT_ID(N'[TVShows]'))
    SET IDENTITY_INSERT [TVShows] ON;
INSERT INTO [TVShows] ([Id], [Audience], [Description], [Genre], [Name], [Seasons], [Status], [Year])
VALUES (1, N'18+', N'Nine noble families fight for control over the lands of Westeros, while an ancient enemy returns after being dormant for millennia.', N'Drama', N'Game of Thrones', 8, N'Ended', 2011),
(2, N'18+', N'Each season has its own self-contained storyline and characters and it has been posed that each season will introduce a new location as well as new characters and storylines.', N'Horror', N'American Horror Story', 10, N'On going', 2011),
(3, N'18+', N'Dexter is a serial killer with a "code" which directs his compulsions to kill only the guilty. As a blood spatter analyst for the Miami police, he has access to crime scenes, picking up clues and checking DNA to confirm a target''s guilt before he kills them.', N'Mystery', N'Dexter', 8, N'Ended', 2006),
(4, N'16+', N'The series follows a dangerously charming, intensely obsessive young man who goes to extreme measures to insert himself into the lives of those he is transfixed by.', N'Psychological thriller', N'You', 4, N'On going', 2018);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Audience', N'Description', N'Genre', N'Name', N'Seasons', N'Status', N'Year') AND [object_id] = OBJECT_ID(N'[TVShows]'))
    SET IDENTITY_INSERT [TVShows] OFF;
2023-05-09 09:08:58.6047|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Email', N'IsAdmin', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Email], [IsAdmin], [Password], [Username])
VALUES (1, N'deeagabor@gmail.com', CAST(1 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'deeagabor'),
(2, N'wolflorena@gmail.com', CAST(1 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'wolflorena'),
(3, N'testunu@gmail.com', CAST(0 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'test1'),
(4, N'testdoi@gmail.com', CAST(0 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'test2');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Email', N'IsAdmin', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-05-09 09:08:58.6047|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230328164011_Initial Migration', N'7.0.4');
2023-05-09 09:08:58.6401|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230425163840_Poster'.
2023-05-09 09:08:58.6756|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Poster] nvarchar(max) NULL;
2023-05-09 09:08:58.6834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-05-09 09:08:58.6834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-05-09 09:08:58.6834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-05-09 09:08:58.7020|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-05-09 09:08:58.7020|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230425163840_Poster', N'7.0.4');
2023-05-09 09:08:58.7175|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230426194744_Poster - PUT'.
2023-05-09 09:08:58.7321|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230426194744_Poster - PUT', N'7.0.4');
2023-05-09 09:08:58.7321|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230426202154_Poster - NotMapped'.
2023-05-09 09:08:58.7547|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230426202154_Poster - NotMapped', N'7.0.4');
2023-05-09 09:08:58.7628|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230426204947_New properties'.
2023-05-09 09:08:58.7798|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Banner] nvarchar(max) NULL;
2023-05-09 09:08:58.7798|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Likes] int NOT NULL DEFAULT 0;
2023-05-09 09:08:58.7950|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Logo] nvarchar(max) NULL;
2023-05-09 09:08:58.7950|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [NewSeason] nvarchar(max) NULL;
2023-05-09 09:08:58.8095|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Streaming] nvarchar(max) NOT NULL DEFAULT N'';
2023-05-09 09:08:58.8095|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 1024, [Logo] = NULL, [NewSeason] = NULL, [Streaming] = N'Netflix'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-05-09 09:08:58.8250|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 2200, [Logo] = NULL, [NewSeason] = N'11/12/2023', [Streaming] = N'HBO'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-05-09 09:08:58.8250|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 870, [Logo] = NULL, [NewSeason] = NULL, [Streaming] = N'Disney+'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-05-09 09:08:58.8250|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 2560, [Logo] = NULL, [NewSeason] = N'12/10/2023', [Streaming] = N'Amazon Prime'
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-05-09 09:08:58.8430|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230426204947_New properties', N'7.0.4');
2023-05-09 09:08:59.2709|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\Andreea\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-05-09 09:09:02.7449|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7053/ - -
2023-05-09 09:09:02.9273|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7053/ - - - 404 0 - 188.8818ms
2023-05-09 11:55:30.0679|INFO|Nite.API.Program|Initializing application...
2023-05-09 11:55:40.2656|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (63ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-05-09 11:55:40.5138|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (53ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [NiteDb] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-05-09 11:55:40.6679|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (151ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [NiteDb];
2023-05-09 11:55:41.8172|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1,005ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [NiteDb];
2023-05-09 11:55:42.3386|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (519ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [NiteDb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-05-09 11:55:42.3815|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-05-09 11:55:42.5861|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-05-09 11:55:42.5921|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-05-09 11:55:42.6467|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (41ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-05-09 11:55:42.6675|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-05-09 11:55:42.7196|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230328164011_Initial Migration'.
2023-05-09 11:55:42.8353|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TVShows] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Year] int NOT NULL,
    [Audience] nvarchar(max) NOT NULL,
    [Seasons] int NOT NULL,
    [Genre] nvarchar(max) NOT NULL,
    [Status] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_TVShows] PRIMARY KEY ([Id])
);
2023-05-09 11:55:42.8434|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Username] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Password] nvarchar(max) NOT NULL,
    [IsAdmin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-05-09 11:55:42.9167|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (71ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Audience', N'Description', N'Genre', N'Name', N'Seasons', N'Status', N'Year') AND [object_id] = OBJECT_ID(N'[TVShows]'))
    SET IDENTITY_INSERT [TVShows] ON;
INSERT INTO [TVShows] ([Id], [Audience], [Description], [Genre], [Name], [Seasons], [Status], [Year])
VALUES (1, N'18+', N'Nine noble families fight for control over the lands of Westeros, while an ancient enemy returns after being dormant for millennia.', N'Drama', N'Game of Thrones', 8, N'Ended', 2011),
(2, N'18+', N'Each season has its own self-contained storyline and characters and it has been posed that each season will introduce a new location as well as new characters and storylines.', N'Horror', N'American Horror Story', 10, N'On going', 2011),
(3, N'18+', N'Dexter is a serial killer with a "code" which directs his compulsions to kill only the guilty. As a blood spatter analyst for the Miami police, he has access to crime scenes, picking up clues and checking DNA to confirm a target''s guilt before he kills them.', N'Mystery', N'Dexter', 8, N'Ended', 2006),
(4, N'16+', N'The series follows a dangerously charming, intensely obsessive young man who goes to extreme measures to insert himself into the lives of those he is transfixed by.', N'Psychological thriller', N'You', 4, N'On going', 2018);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Audience', N'Description', N'Genre', N'Name', N'Seasons', N'Status', N'Year') AND [object_id] = OBJECT_ID(N'[TVShows]'))
    SET IDENTITY_INSERT [TVShows] OFF;
2023-05-09 11:55:42.9351|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Email', N'IsAdmin', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Email], [IsAdmin], [Password], [Username])
VALUES (1, N'deeagabor@gmail.com', CAST(1 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'deeagabor'),
(2, N'wolflorena@gmail.com', CAST(1 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'wolflorena'),
(3, N'testunu@gmail.com', CAST(0 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'test1'),
(4, N'testdoi@gmail.com', CAST(0 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'test2');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Email', N'IsAdmin', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-05-09 11:55:42.9351|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230328164011_Initial Migration', N'7.0.4');
2023-05-09 11:55:42.9685|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230425163840_Poster'.
2023-05-09 11:55:43.0045|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Poster] nvarchar(max) NULL;
2023-05-09 11:55:43.0111|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-05-09 11:55:43.0111|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-05-09 11:55:43.0111|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-05-09 11:55:43.0257|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-05-09 11:55:43.0257|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230425163840_Poster', N'7.0.4');
2023-05-09 11:55:43.0257|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230426194744_Poster - PUT'.
2023-05-09 11:55:43.0474|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230426194744_Poster - PUT', N'7.0.4');
2023-05-09 11:55:43.0474|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230426202154_Poster - NotMapped'.
2023-05-09 11:55:43.0642|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230426202154_Poster - NotMapped', N'7.0.4');
2023-05-09 11:55:43.0642|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230426204947_New properties'.
2023-05-09 11:55:43.0849|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Banner] nvarchar(max) NULL;
2023-05-09 11:55:43.0917|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Likes] int NOT NULL DEFAULT 0;
2023-05-09 11:55:43.0917|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Logo] nvarchar(max) NULL;
2023-05-09 11:55:43.0917|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [NewSeason] nvarchar(max) NULL;
2023-05-09 11:55:43.1098|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Streaming] nvarchar(max) NOT NULL DEFAULT N'';
2023-05-09 11:55:43.1098|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 1024, [Logo] = NULL, [NewSeason] = NULL, [Streaming] = N'Netflix'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-05-09 11:55:43.1236|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 2200, [Logo] = NULL, [NewSeason] = N'11/12/2023', [Streaming] = N'HBO'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-05-09 11:55:43.1236|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 870, [Logo] = NULL, [NewSeason] = NULL, [Streaming] = N'Disney+'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-05-09 11:55:43.1236|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 2560, [Logo] = NULL, [NewSeason] = N'12/10/2023', [Streaming] = N'Amazon Prime'
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-05-09 11:55:43.1377|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230426204947_New properties', N'7.0.4');
2023-05-09 11:55:43.1377|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230509085445_Seasons DB'.
2023-05-09 11:55:43.1924|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TVShowSeasons] (
    [Id] int NOT NULL IDENTITY,
    [TVShowId] int NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [NumberOfEpisodes] int NOT NULL,
    [DurationEpisode] int NOT NULL,
    CONSTRAINT [PK_TVShowSeasons] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TVShowSeasons_TVShows_TVShowId] FOREIGN KEY ([TVShowId]) REFERENCES [TVShows] ([Id]) ON DELETE CASCADE
);
2023-05-09 11:55:43.2217|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DurationEpisode', N'Name', N'NumberOfEpisodes', N'TVShowId') AND [object_id] = OBJECT_ID(N'[TVShowSeasons]'))
    SET IDENTITY_INSERT [TVShowSeasons] ON;
INSERT INTO [TVShowSeasons] ([Id], [DurationEpisode], [Name], [NumberOfEpisodes], [TVShowId])
VALUES (1, 42, N'Season 1', 10, 1),
(2, 45, N'Season 2', 12, 1);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DurationEpisode', N'Name', N'NumberOfEpisodes', N'TVShowId') AND [object_id] = OBJECT_ID(N'[TVShowSeasons]'))
    SET IDENTITY_INSERT [TVShowSeasons] OFF;
2023-05-09 11:55:43.2368|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_TVShowSeasons_TVShowId] ON [TVShowSeasons] ([TVShowId]);
2023-05-09 11:55:43.2368|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230509085445_Seasons DB', N'7.0.4');
2023-05-09 11:55:43.5746|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\Andreea\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-05-09 11:55:45.9537|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7053/ - -
2023-05-09 11:55:46.1486|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7053/ - - - 404 0 - 203.3535ms
2023-05-09 12:34:42.1234|INFO|Nite.API.Program|Initializing application...
2023-05-09 12:34:50.4129|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (58ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-05-09 12:34:53.6398|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3,047ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [NiteDb] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-05-09 12:34:53.7752|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (128ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [NiteDb];
2023-05-09 12:34:55.2083|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1,324ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [NiteDb];
2023-05-09 12:34:55.6237|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (411ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [NiteDb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-05-09 12:34:55.6595|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-05-09 12:34:55.8703|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-05-09 12:34:55.8703|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-05-09 12:34:55.9351|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (45ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-05-09 12:34:55.9542|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-05-09 12:34:56.0069|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230328164011_Initial Migration'.
2023-05-09 12:34:56.1328|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TVShows] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Year] int NOT NULL,
    [Audience] nvarchar(max) NOT NULL,
    [Seasons] int NOT NULL,
    [Genre] nvarchar(max) NOT NULL,
    [Status] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_TVShows] PRIMARY KEY ([Id])
);
2023-05-09 12:34:56.1424|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Username] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Password] nvarchar(max) NOT NULL,
    [IsAdmin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-05-09 12:34:56.2224|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (76ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Audience', N'Description', N'Genre', N'Name', N'Seasons', N'Status', N'Year') AND [object_id] = OBJECT_ID(N'[TVShows]'))
    SET IDENTITY_INSERT [TVShows] ON;
INSERT INTO [TVShows] ([Id], [Audience], [Description], [Genre], [Name], [Seasons], [Status], [Year])
VALUES (1, N'18+', N'Nine noble families fight for control over the lands of Westeros, while an ancient enemy returns after being dormant for millennia.', N'Drama', N'Game of Thrones', 8, N'Ended', 2011),
(2, N'18+', N'Each season has its own self-contained storyline and characters and it has been posed that each season will introduce a new location as well as new characters and storylines.', N'Horror', N'American Horror Story', 10, N'On going', 2011),
(3, N'18+', N'Dexter is a serial killer with a "code" which directs his compulsions to kill only the guilty. As a blood spatter analyst for the Miami police, he has access to crime scenes, picking up clues and checking DNA to confirm a target''s guilt before he kills them.', N'Mystery', N'Dexter', 8, N'Ended', 2006),
(4, N'16+', N'The series follows a dangerously charming, intensely obsessive young man who goes to extreme measures to insert himself into the lives of those he is transfixed by.', N'Psychological thriller', N'You', 4, N'On going', 2018);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Audience', N'Description', N'Genre', N'Name', N'Seasons', N'Status', N'Year') AND [object_id] = OBJECT_ID(N'[TVShows]'))
    SET IDENTITY_INSERT [TVShows] OFF;
2023-05-09 12:34:56.2430|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Email', N'IsAdmin', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Email], [IsAdmin], [Password], [Username])
VALUES (1, N'deeagabor@gmail.com', CAST(1 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'deeagabor'),
(2, N'wolflorena@gmail.com', CAST(1 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'wolflorena'),
(3, N'testunu@gmail.com', CAST(0 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'test1'),
(4, N'testdoi@gmail.com', CAST(0 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'test2');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Email', N'IsAdmin', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-05-09 12:34:56.2494|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230328164011_Initial Migration', N'7.0.4');
2023-05-09 12:34:56.2793|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230425163840_Poster'.
2023-05-09 12:34:56.3156|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Poster] nvarchar(max) NULL;
2023-05-09 12:34:56.3222|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-05-09 12:34:56.3222|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-05-09 12:34:56.3222|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-05-09 12:34:56.3222|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-05-09 12:34:56.3428|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230425163840_Poster', N'7.0.4');
2023-05-09 12:34:56.3428|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230426194744_Poster - PUT'.
2023-05-09 12:34:56.3654|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230426194744_Poster - PUT', N'7.0.4');
2023-05-09 12:34:56.3743|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230426202154_Poster - NotMapped'.
2023-05-09 12:34:56.3876|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230426202154_Poster - NotMapped', N'7.0.4');
2023-05-09 12:34:56.3876|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230426204947_New properties'.
2023-05-09 12:34:56.4103|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Banner] nvarchar(max) NULL;
2023-05-09 12:34:56.4180|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Likes] int NOT NULL DEFAULT 0;
2023-05-09 12:34:56.4180|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Logo] nvarchar(max) NULL;
2023-05-09 12:34:56.4180|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [NewSeason] nvarchar(max) NULL;
2023-05-09 12:34:56.4367|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Streaming] nvarchar(max) NOT NULL DEFAULT N'';
2023-05-09 12:34:56.4367|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 1024, [Logo] = NULL, [NewSeason] = NULL, [Streaming] = N'Netflix'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-05-09 12:34:56.4498|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 2200, [Logo] = NULL, [NewSeason] = N'11/12/2023', [Streaming] = N'HBO'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-05-09 12:34:56.4498|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 870, [Logo] = NULL, [NewSeason] = NULL, [Streaming] = N'Disney+'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-05-09 12:34:56.4498|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 2560, [Logo] = NULL, [NewSeason] = N'12/10/2023', [Streaming] = N'Amazon Prime'
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-05-09 12:34:56.4644|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230426204947_New properties', N'7.0.4');
2023-05-09 12:34:56.4644|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230509085445_Seasons DB'.
2023-05-09 12:34:56.5234|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TVShowSeasons] (
    [Id] int NOT NULL IDENTITY,
    [TVShowId] int NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [NumberOfEpisodes] int NOT NULL,
    [DurationEpisode] int NOT NULL,
    CONSTRAINT [PK_TVShowSeasons] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TVShowSeasons_TVShows_TVShowId] FOREIGN KEY ([TVShowId]) REFERENCES [TVShows] ([Id]) ON DELETE CASCADE
);
2023-05-09 12:34:56.5481|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DurationEpisode', N'Name', N'NumberOfEpisodes', N'TVShowId') AND [object_id] = OBJECT_ID(N'[TVShowSeasons]'))
    SET IDENTITY_INSERT [TVShowSeasons] ON;
INSERT INTO [TVShowSeasons] ([Id], [DurationEpisode], [Name], [NumberOfEpisodes], [TVShowId])
VALUES (1, 42, N'Season 1', 10, 1),
(2, 45, N'Season 2', 12, 1);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DurationEpisode', N'Name', N'NumberOfEpisodes', N'TVShowId') AND [object_id] = OBJECT_ID(N'[TVShowSeasons]'))
    SET IDENTITY_INSERT [TVShowSeasons] OFF;
2023-05-09 12:34:56.5639|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_TVShowSeasons_TVShowId] ON [TVShowSeasons] ([TVShowId]);
2023-05-09 12:34:56.5639|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230509085445_Seasons DB', N'7.0.4');
2023-05-09 12:34:56.9037|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\Andreea\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-05-09 12:35:00.2576|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7053/ - -
2023-05-09 12:35:00.4850|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7053/ - - - 404 0 - 235.9608ms
2023-05-09 12:46:40.7624|INFO|Nite.API.Program|Initializing application...
2023-05-09 12:46:56.2030|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (57ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-05-09 12:46:59.4065|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3,047ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [NiteDb] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-05-09 12:46:59.5690|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (161ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [NiteDb];
2023-05-09 12:47:00.5573|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (887ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [NiteDb];
2023-05-09 12:47:00.9762|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (416ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [NiteDb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-05-09 12:47:01.0041|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-05-09 12:47:01.3493|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (201ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-05-09 12:47:01.3569|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-05-09 12:47:01.4286|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (56ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-05-09 12:47:01.4496|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-05-09 12:47:01.5022|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230328164011_Initial Migration'.
2023-05-09 12:47:01.6239|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TVShows] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Year] int NOT NULL,
    [Audience] nvarchar(max) NOT NULL,
    [Seasons] int NOT NULL,
    [Genre] nvarchar(max) NOT NULL,
    [Status] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_TVShows] PRIMARY KEY ([Id])
);
2023-05-09 12:47:01.6239|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Username] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Password] nvarchar(max) NOT NULL,
    [IsAdmin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-05-09 12:47:01.7060|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (72ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Audience', N'Description', N'Genre', N'Name', N'Seasons', N'Status', N'Year') AND [object_id] = OBJECT_ID(N'[TVShows]'))
    SET IDENTITY_INSERT [TVShows] ON;
INSERT INTO [TVShows] ([Id], [Audience], [Description], [Genre], [Name], [Seasons], [Status], [Year])
VALUES (1, N'18+', N'Nine noble families fight for control over the lands of Westeros, while an ancient enemy returns after being dormant for millennia.', N'Drama', N'Game of Thrones', 8, N'Ended', 2011),
(2, N'18+', N'Each season has its own self-contained storyline and characters and it has been posed that each season will introduce a new location as well as new characters and storylines.', N'Horror', N'American Horror Story', 10, N'On going', 2011),
(3, N'18+', N'Dexter is a serial killer with a "code" which directs his compulsions to kill only the guilty. As a blood spatter analyst for the Miami police, he has access to crime scenes, picking up clues and checking DNA to confirm a target''s guilt before he kills them.', N'Mystery', N'Dexter', 8, N'Ended', 2006),
(4, N'16+', N'The series follows a dangerously charming, intensely obsessive young man who goes to extreme measures to insert himself into the lives of those he is transfixed by.', N'Psychological thriller', N'You', 4, N'On going', 2018);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Audience', N'Description', N'Genre', N'Name', N'Seasons', N'Status', N'Year') AND [object_id] = OBJECT_ID(N'[TVShows]'))
    SET IDENTITY_INSERT [TVShows] OFF;
2023-05-09 12:47:01.7254|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Email', N'IsAdmin', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Email], [IsAdmin], [Password], [Username])
VALUES (1, N'deeagabor@gmail.com', CAST(1 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'deeagabor'),
(2, N'wolflorena@gmail.com', CAST(1 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'wolflorena'),
(3, N'testunu@gmail.com', CAST(0 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'test1'),
(4, N'testdoi@gmail.com', CAST(0 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'test2');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Email', N'IsAdmin', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-05-09 12:47:01.7314|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230328164011_Initial Migration', N'7.0.4');
2023-05-09 12:47:01.7568|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230425163840_Poster'.
2023-05-09 12:47:01.7892|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Poster] nvarchar(max) NULL;
2023-05-09 12:47:01.7961|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-05-09 12:47:01.7961|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-05-09 12:47:01.7961|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-05-09 12:47:01.8102|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-05-09 12:47:01.8102|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230425163840_Poster', N'7.0.4');
2023-05-09 12:47:01.8252|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230426194744_Poster - PUT'.
2023-05-09 12:47:01.8252|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230426194744_Poster - PUT', N'7.0.4');
2023-05-09 12:47:01.8443|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230426202154_Poster - NotMapped'.
2023-05-09 12:47:01.8537|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230426202154_Poster - NotMapped', N'7.0.4');
2023-05-09 12:47:01.8537|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230426204947_New properties'.
2023-05-09 12:47:01.8733|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Banner] nvarchar(max) NULL;
2023-05-09 12:47:01.8733|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Likes] int NOT NULL DEFAULT 0;
2023-05-09 12:47:01.8856|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Logo] nvarchar(max) NULL;
2023-05-09 12:47:01.8856|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [NewSeason] nvarchar(max) NULL;
2023-05-09 12:47:01.8856|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Streaming] nvarchar(max) NOT NULL DEFAULT N'';
2023-05-09 12:47:01.9039|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 1024, [Logo] = NULL, [NewSeason] = NULL, [Streaming] = N'Netflix'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-05-09 12:47:01.9039|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 2200, [Logo] = NULL, [NewSeason] = N'11/12/2023', [Streaming] = N'HBO'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-05-09 12:47:01.9039|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 870, [Logo] = NULL, [NewSeason] = NULL, [Streaming] = N'Disney+'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-05-09 12:47:01.9195|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 2560, [Logo] = NULL, [NewSeason] = N'12/10/2023', [Streaming] = N'Amazon Prime'
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-05-09 12:47:01.9195|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230426204947_New properties', N'7.0.4');
2023-05-09 12:47:01.9195|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230427133723_test'.
2023-05-09 12:47:01.9403|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230427133723_test', N'7.0.4');
2023-05-09 12:47:01.9403|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230427134221_test1'.
2023-05-09 12:47:01.9643|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DELETE FROM [TVShows]
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-05-09 12:47:01.9643|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DELETE FROM [TVShows]
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-05-09 12:47:01.9643|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DELETE FROM [TVShows]
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-05-09 12:47:01.9643|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DELETE FROM [TVShows]
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-05-09 12:47:01.9815|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230427134221_test1', N'7.0.4');
2023-05-09 12:47:01.9815|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230503212914_TVShowSeasons DB'.
2023-05-09 12:47:02.0292|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TVShowSeasons] (
    [Id] int NOT NULL IDENTITY,
    [TVShowId] int NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [NumberOfEpisodes] int NOT NULL,
    [DurationEpisode] int NOT NULL,
    CONSTRAINT [PK_TVShowSeasons] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TVShowSeasons_TVShows_TVShowId] FOREIGN KEY ([TVShowId]) REFERENCES [TVShows] ([Id]) ON DELETE CASCADE
);
2023-05-09 12:47:02.0576|ERROR|Microsoft.EntityFrameworkCore.Database.Command|Failed executing DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DurationEpisode', N'Name', N'NumberOfEpisodes', N'TVShowId') AND [object_id] = OBJECT_ID(N'[TVShowSeasons]'))
    SET IDENTITY_INSERT [TVShowSeasons] ON;
INSERT INTO [TVShowSeasons] ([Id], [DurationEpisode], [Name], [NumberOfEpisodes], [TVShowId])
VALUES (1, 42, N'Season 1', 10, 1);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DurationEpisode', N'Name', N'NumberOfEpisodes', N'TVShowId') AND [object_id] = OBJECT_ID(N'[TVShowSeasons]'))
    SET IDENTITY_INSERT [TVShowSeasons] OFF;
2023-05-09 12:47:02.1528|ERROR|Nite.API.Program|An error occured while migrating the database!|Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_TVShowSeasons_TVShows_TVShowId". The conflict occurred in database "NiteDb", table "dbo.TVShows", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean isAsync, Int32 timeout, Boolean asyncWrite)
   at Microsoft.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String methodName)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Nite.API.Program.Main(String[] args) in D:\Nite\Nite - Backend\Nite.API\Program.cs:line 29
ClientConnectionId:51fb7da2-3a20-4b51-a63e-ff38382703d0
Error Number:547,State:0,Class:16
2023-05-09 12:47:02.8111|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\Andreea\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-05-09 12:47:07.4957|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7053/ - -
2023-05-09 12:47:07.6970|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7053/ - - - 404 0 - 206.3869ms
2023-05-09 12:48:52.8312|INFO|Nite.API.Program|Initializing application...
2023-05-09 12:49:00.8593|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (73ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-05-09 12:49:04.1413|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3,033ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [NiteDb] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-05-09 12:49:04.3059|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (162ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [NiteDb];
2023-05-09 12:49:05.5366|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1,087ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [NiteDb];
2023-05-09 12:49:06.4430|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (903ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [NiteDb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-05-09 12:49:06.4718|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-05-09 12:49:06.6516|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-05-09 12:49:06.6516|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-05-09 12:49:06.7181|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (47ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-05-09 12:49:06.7373|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-05-09 12:49:06.7863|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230328164011_Initial Migration'.
2023-05-09 12:49:06.9138|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TVShows] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Year] int NOT NULL,
    [Audience] nvarchar(max) NOT NULL,
    [Seasons] int NOT NULL,
    [Genre] nvarchar(max) NOT NULL,
    [Status] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_TVShows] PRIMARY KEY ([Id])
);
2023-05-09 12:49:06.9232|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Username] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Password] nvarchar(max) NOT NULL,
    [IsAdmin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-05-09 12:49:06.9988|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (73ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Audience', N'Description', N'Genre', N'Name', N'Seasons', N'Status', N'Year') AND [object_id] = OBJECT_ID(N'[TVShows]'))
    SET IDENTITY_INSERT [TVShows] ON;
INSERT INTO [TVShows] ([Id], [Audience], [Description], [Genre], [Name], [Seasons], [Status], [Year])
VALUES (1, N'18+', N'Nine noble families fight for control over the lands of Westeros, while an ancient enemy returns after being dormant for millennia.', N'Drama', N'Game of Thrones', 8, N'Ended', 2011),
(2, N'18+', N'Each season has its own self-contained storyline and characters and it has been posed that each season will introduce a new location as well as new characters and storylines.', N'Horror', N'American Horror Story', 10, N'On going', 2011),
(3, N'18+', N'Dexter is a serial killer with a "code" which directs his compulsions to kill only the guilty. As a blood spatter analyst for the Miami police, he has access to crime scenes, picking up clues and checking DNA to confirm a target''s guilt before he kills them.', N'Mystery', N'Dexter', 8, N'Ended', 2006),
(4, N'16+', N'The series follows a dangerously charming, intensely obsessive young man who goes to extreme measures to insert himself into the lives of those he is transfixed by.', N'Psychological thriller', N'You', 4, N'On going', 2018);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Audience', N'Description', N'Genre', N'Name', N'Seasons', N'Status', N'Year') AND [object_id] = OBJECT_ID(N'[TVShows]'))
    SET IDENTITY_INSERT [TVShows] OFF;
2023-05-09 12:49:07.0226|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Email', N'IsAdmin', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Email], [IsAdmin], [Password], [Username])
VALUES (1, N'deeagabor@gmail.com', CAST(1 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'deeagabor'),
(2, N'wolflorena@gmail.com', CAST(1 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'wolflorena'),
(3, N'testunu@gmail.com', CAST(0 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'test1'),
(4, N'testdoi@gmail.com', CAST(0 AS bit), N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f', N'test2');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Email', N'IsAdmin', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-05-09 12:49:07.0288|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230328164011_Initial Migration', N'7.0.4');
2023-05-09 12:49:07.0565|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230425163840_Poster'.
2023-05-09 12:49:07.0915|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Poster] nvarchar(max) NULL;
2023-05-09 12:49:07.0915|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-05-09 12:49:07.0915|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-05-09 12:49:07.1081|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-05-09 12:49:07.1081|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Poster] = NULL
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-05-09 12:49:07.1197|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230425163840_Poster', N'7.0.4');
2023-05-09 12:49:07.1197|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230426194744_Poster - PUT'.
2023-05-09 12:49:07.1424|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230426194744_Poster - PUT', N'7.0.4');
2023-05-09 12:49:07.1508|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230426202154_Poster - NotMapped'.
2023-05-09 12:49:07.1508|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230426202154_Poster - NotMapped', N'7.0.4');
2023-05-09 12:49:07.1691|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230426204947_New properties'.
2023-05-09 12:49:07.1856|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Banner] nvarchar(max) NULL;
2023-05-09 12:49:07.1856|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Likes] int NOT NULL DEFAULT 0;
2023-05-09 12:49:07.1989|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Logo] nvarchar(max) NULL;
2023-05-09 12:49:07.1989|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [NewSeason] nvarchar(max) NULL;
2023-05-09 12:49:07.1989|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [TVShows] ADD [Streaming] nvarchar(max) NOT NULL DEFAULT N'';
2023-05-09 12:49:07.2193|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 1024, [Logo] = NULL, [NewSeason] = NULL, [Streaming] = N'Netflix'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-05-09 12:49:07.2193|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 2200, [Logo] = NULL, [NewSeason] = N'11/12/2023', [Streaming] = N'HBO'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-05-09 12:49:07.2319|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 870, [Logo] = NULL, [NewSeason] = NULL, [Streaming] = N'Disney+'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-05-09 12:49:07.2319|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [TVShows] SET [Banner] = NULL, [Likes] = 2560, [Logo] = NULL, [NewSeason] = N'12/10/2023', [Streaming] = N'Amazon Prime'
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-05-09 12:49:07.2319|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230426204947_New properties', N'7.0.4');
2023-05-09 12:49:07.2503|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230509085445_Seasons DB'.
2023-05-09 12:49:07.2932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [TVShowSeasons] (
    [Id] int NOT NULL IDENTITY,
    [TVShowId] int NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [NumberOfEpisodes] int NOT NULL,
    [DurationEpisode] int NOT NULL,
    CONSTRAINT [PK_TVShowSeasons] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TVShowSeasons_TVShows_TVShowId] FOREIGN KEY ([TVShowId]) REFERENCES [TVShows] ([Id]) ON DELETE CASCADE
);
2023-05-09 12:49:07.3168|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DurationEpisode', N'Name', N'NumberOfEpisodes', N'TVShowId') AND [object_id] = OBJECT_ID(N'[TVShowSeasons]'))
    SET IDENTITY_INSERT [TVShowSeasons] ON;
INSERT INTO [TVShowSeasons] ([Id], [DurationEpisode], [Name], [NumberOfEpisodes], [TVShowId])
VALUES (1, 42, N'Season 1', 10, 1),
(2, 45, N'Season 2', 12, 1);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DurationEpisode', N'Name', N'NumberOfEpisodes', N'TVShowId') AND [object_id] = OBJECT_ID(N'[TVShowSeasons]'))
    SET IDENTITY_INSERT [TVShowSeasons] OFF;
2023-05-09 12:49:07.3367|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_TVShowSeasons_TVShowId] ON [TVShowSeasons] ([TVShowId]);
2023-05-09 12:49:07.3418|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230509085445_Seasons DB', N'7.0.4');
2023-05-09 12:49:07.6739|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\Andreea\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-05-09 12:49:09.0717|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:7053/ - -
2023-05-09 12:49:09.2245|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:7053/ - - - 404 0 - 157.3910ms
